(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{9501:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders",function(){return t(2177)}])},2177:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var r=t(5893),a=t(7294),n=t(9008),c=t.n(n),d=t(1664),i=t.n(d),l=t(1163),o=t(9392),x=t(9315),m=t(1586),p=t(2914),h=t(6345),u=t(8347),y=t(4318),g=t(597),j=t(7119),b=t(113),f=t(7706),N=t(8255),w=t(9638),v=t(6615);function k(){let e=(0,l.useRouter)(),[s,t]=(0,a.useState)([]),[n,d]=(0,a.useState)(""),[k,Z]=(0,a.useState)("all"),[C,z]=(0,a.useState)(1);(0,a.useEffect)(()=>{let e=localStorage.getItem("orders_data");e&&t(JSON.parse(e))},[]);let _=s.filter(e=>{let s=e.id&&e.id.toLowerCase().includes(n.toLowerCase())||e.customer&&e.customer.toLowerCase().includes(n.toLowerCase()),t="all"===k||e.status&&e.status.toLowerCase()===k.toLowerCase();return s&&t}).sort((e,s)=>new Date(s.date)-new Date(e.date)),S=Math.ceil(_.length/15),M=_.slice((C-1)*15,15*C),L={total:s.length,pending:s.filter(e=>"Pending"===e.status).length,processing:s.filter(e=>"Processing"===e.status).length,completed:s.filter(e=>"Completed"===e.status).length},E=e=>{if(confirm("คุณต้องการลบคำสั่งซื้อนี้ใช่หรือไม่?")){let r=s.filter(s=>s.id!==e);t(r),localStorage.setItem("orders_data",JSON.stringify(r))}},O=e=>{switch(null==e?void 0:e.toLowerCase()){case"pending":default:return"bg-secondary-100 text-secondary-700";case"processing":return"bg-primary-100 text-primary-700";case"completed":return"bg-success-100 text-success-700";case"cancelled":return"bg-danger-100 text-danger-700"}},T=e=>{switch(e){case"ติดตั้ง":return"bg-danger-50 text-danger-700 border-danger-100";case"ส่งของ":return"bg-warning-50 text-warning-700 border-warning-100";default:return"bg-primary-50 text-primary-700 border-primary-100"}},P=e=>{switch(e){case"ติดตั้ง":return(0,r.jsx)(x.Z,{size:14,className:"mr-1"});case"ส่งของ":return(0,r.jsx)(m.Z,{size:14,className:"mr-1"});default:return(0,r.jsx)(p.Z,{size:14,className:"mr-1"})}};return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"รายการคำสั่งซื้อ - 168VSC System"})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-secondary-900 flex items-center gap-3",children:[(0,r.jsx)(h.Z,{className:"text-primary-600",size:32}),"รายการคำสั่งซื้อ"]}),(0,r.jsxs)("p",{className:"text-secondary-500 mt-1",children:["จัดการคำสั่งซื้อทั้งหมด ",s.length," รายการ"]})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/order"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2 font-medium shadow-lg shadow-primary-500/30",children:[(0,r.jsx)(u.Z,{size:18}),"สร้างคำสั่งซื้อใหม่"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{onClick:()=>Z("all"),className:"bg-white p-5 rounded-xl border transition-all cursor-pointer hover:shadow-md ".concat("all"===k?"border-primary-500 ring-1 ring-primary-500":"border-secondary-200 hover:border-primary-300"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-secondary-500 text-sm font-medium",children:"ทั้งหมด"}),(0,r.jsx)("div",{className:"p-2 bg-secondary-50 rounded-lg text-secondary-600",children:(0,r.jsx)(h.Z,{size:20})})]}),(0,r.jsx)("div",{className:"text-3xl font-bold text-secondary-900",children:L.total})]}),(0,r.jsxs)("div",{onClick:()=>Z("pending"),className:"bg-white p-5 rounded-xl border transition-all cursor-pointer hover:shadow-md ".concat("pending"===k?"border-secondary-500 ring-1 ring-secondary-500":"border-secondary-200 hover:border-secondary-300"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-secondary-500 text-sm font-medium",children:"รอดำเนินการ"}),(0,r.jsx)("div",{className:"p-2 bg-secondary-100 rounded-lg text-secondary-600",children:(0,r.jsx)(y.Z,{size:20})})]}),(0,r.jsx)("div",{className:"text-3xl font-bold text-secondary-900",children:L.pending})]}),(0,r.jsxs)("div",{onClick:()=>Z("processing"),className:"bg-white p-5 rounded-xl border transition-all cursor-pointer hover:shadow-md ".concat("processing"===k?"border-primary-500 ring-1 ring-primary-500":"border-secondary-200 hover:border-primary-300"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-primary-600 text-sm font-medium",children:"กำลังดำเนินการ"}),(0,r.jsx)("div",{className:"p-2 bg-primary-50 rounded-lg text-primary-600",children:(0,r.jsx)(x.Z,{size:20})})]}),(0,r.jsx)("div",{className:"text-3xl font-bold text-primary-700",children:L.processing})]}),(0,r.jsxs)("div",{onClick:()=>Z("completed"),className:"bg-white p-5 rounded-xl border transition-all cursor-pointer hover:shadow-md ".concat("completed"===k?"border-success-500 ring-1 ring-success-500":"border-secondary-200 hover:border-success-300"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-success-600 text-sm font-medium",children:"เสร็จสิ้น"}),(0,r.jsx)("div",{className:"p-2 bg-success-50 rounded-lg text-success-600",children:(0,r.jsx)(g.Z,{size:20})})]}),(0,r.jsx)("div",{className:"text-3xl font-bold text-success-700",children:L.completed})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-secondary-200 shadow-sm flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,r.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,r.jsx)(j.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-400",size:20}),(0,r.jsx)("input",{type:"text",placeholder:"ค้นหา Order ID หรือชื่อลูกค้า...",value:n,onChange:e=>{d(e.target.value),z(1)},className:"w-full pl-10 pr-4 py-2 border border-secondary-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 transition-shadow"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-secondary-50 rounded-lg border border-secondary-200 text-secondary-600 text-sm font-medium",children:[(0,r.jsx)(b.Z,{size:16}),(0,r.jsxs)("span",{children:["สถานะ: ","all"===k?"ทั้งหมด":k]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-secondary-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-secondary-50 border-b border-secondary-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"Order ID"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"วันที่"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"ลูกค้า"}),(0,r.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"รายการ"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"ยอดรวม"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"มัดจำ"}),(0,r.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"ประเภทงาน"}),(0,r.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"สถานะ"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-secondary-600 uppercase tracking-wider",children:"จัดการ"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-secondary-100",children:M.length>0?M.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-secondary-50 transition-colors group",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)(i(),{href:"/order?id=".concat(e.id),className:"font-mono font-medium text-primary-600 hover:text-primary-700 hover:underline",children:e.id})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600",children:e.date}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-secondary-900",children:e.customer})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-secondary-600",children:Array.isArray(e.items)?e.items.length:e.items}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"text-sm font-bold text-primary-700",children:["฿",(e.total||0).toLocaleString()]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"text-sm text-secondary-600",children:["฿",(e.deposit||0).toLocaleString()]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(T(e.jobType)),children:[P(e.jobType),e.jobType]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(O(e.status)),children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(i(),{href:"/order?id=".concat(e.id),children:(0,r.jsx)("button",{className:"p-2 text-secondary-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"ดูรายละเอียด",children:(0,r.jsx)(f.Z,{size:18})})}),(0,r.jsx)("button",{onClick:()=>E(e.id),className:"p-2 text-secondary-400 hover:text-danger-600 hover:bg-danger-50 rounded-lg transition-colors",title:"ลบคำสั่งซื้อ",children:(0,r.jsx)(N.Z,{size:18})})]})})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"9",className:"px-6 py-12 text-center text-secondary-500",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)(h.Z,{size:48,className:"text-secondary-300 mb-4"}),(0,r.jsx)("p",{className:"text-lg font-medium text-secondary-900",children:"ไม่พบข้อมูลคำสั่งซื้อ"}),(0,r.jsx)("p",{className:"text-sm text-secondary-500 mt-1",children:"ลองเปลี่ยนคำค้นหา หรือสร้างคำสั่งซื้อใหม่"})]})})})})]})}),S>1&&(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-secondary-200 flex items-center justify-between bg-secondary-50",children:[(0,r.jsxs)("div",{className:"text-sm text-secondary-600",children:["แสดง ",(C-1)*15+1," - ",Math.min(15*C,_.length)," จาก ",_.length," รายการ"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>z(e=>Math.max(1,e-1)),disabled:1===C,className:"p-2 border border-secondary-300 rounded-lg text-secondary-600 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(w.Z,{size:18})}),(0,r.jsxs)("span",{className:"text-sm font-medium text-secondary-700 px-2",children:["หน้า ",C," / ",S]}),(0,r.jsx)("button",{onClick:()=>z(e=>Math.min(S,e+1)),disabled:C===S,className:"p-2 border border-secondary-300 rounded-lg text-secondary-600 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(v.Z,{size:18})})]})]})]})]})]})}},4318:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(8387);let a=(0,r.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7706:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(8387);let a=(0,r.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8347:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(8387);let a=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8255:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(8387);let a=(0,r.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[424,956,774,888,179],function(){return e(e.s=9501)}),_N_E=e.O()}]);